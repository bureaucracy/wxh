(function e(t,r,n){function o(c,i){if(!r[c]){if(!t[c]){var l=typeof require=="function"&&require;if(!i&&l)return l(c,!0);if(a)return a(c,!0);var u=new Error("Cannot find module '"+c+"'");throw u.code="MODULE_NOT_FOUND",u}var s=r[c]={exports:{}};t[c][0].call(s.exports,function(e){var r=t[c][1][e];return o(r?r:e)},s,s.exports,e,t,r,n)}return r[c].exports}var a=typeof require=="function"&&require;for(var c=0;c<n.length;c++)o(n[c]);return o})({1:[function(e,t,r){"use strict";var n=e("./src/audio");var o=e("./src/visual");var a=e("./src/matrices");var c=e("./src/utils");var i=document.querySelector("#shop");var l=document.querySelector("canvas");var u=document.querySelector("#stats h3 span");o.resize();n.play();u.textContent=c.getInfo("triangles");i.onclick=function(){o.add(a.generatePuzzle());n.startGame()};window.onresize=function(){o.resize()};setInterval(function(){n.play();o.resize();o.switchBackground()},5e3);window.onkeydown=function(e){if(e.which===38){n.up()}else if(e.which===40){n.down()}else if(e.which===37){n.left()}else if(e.which===39){n.right()}o.calculate()};window.onkeyup=window.ontouchend=function(e){c.saveInfo()};function s(e,t){if(t<=100){n.up()}else if(t>=125){n.down()}else if(e<=50){n.left()}else if(e>=320){n.right()}}var f;l.ontouchstart=function(e){e.preventDefault();if(e.touches){f=setInterval(function(){s(e.touches[0].pageX,e.touches[0].pageY)},10)}else{s(e.pageX,e.pageY)}};l.ontouchend=function(e){e.preventDefault();clearInterval(f)};window.requestAnimationFrame(o.generateGradient)},{"./src/audio":2,"./src/matrices":3,"./src/utils":4,"./src/visual":5}],2:[function(e,t,r){"use strict";var n=e("./utils");var o=new(window.AudioContext||window.webkitAudioContext);var a=new(window.AudioContext||window.webkitAudioContext);function c(e){var t=o.createOscillator();var r=o.createGain();r.gain.value=e.gain;r.gain.linearRampToValueAtTime(0,1500);r.connect(o.destination);t.type=e.osc1[0];t.frequency.value=e.osc1[1]-(n.colorNM-e.osc1[2]);t.connect(r);t.start();var a=o.createOscillator();a.type=e.osc2[0];a.frequency.value=e.osc2[1]-(n.colorNM-e.osc2[2]);a.connect(r);a.start();var c=o.createOscillator();c.type=e.osc3[0];c.frequency.value=e.osc3[1]-(n.colorNM-e.osc3[2]);c.connect(r);c.start();r.gain.exponentialRampToValueAtTime(.001,o.currentTime+2);setTimeout(function(){t.stop();a.stop();c.stop();r.disconnect(o.destination);r=null},e.timeout)}function i(){n.currentFreq+=1e11;if(n.currentFreq>n.HIGHEST_FREQ_HZ){n.currentFreq=n.HIGHEST_FREQ_HZ}c({gain:.01,osc1:["sine",380,310],osc2:["sine",410,390],osc3:["sawtooth",430,410],timeout:1700})}function l(){n.currentFreq-=1e11;if(n.currentFreq<n.LOWEST_FREQ_HZ){n.currentFreq=n.LOWEST_FREQ_HZ}c({gain:.01,osc1:["sine",400,310],osc2:["sine",430,400],osc3:["sawtooth",430,410],timeout:2200})}function u(){n.currentHorizontal+=.001;n.currentHorizontal=parseFloat(n.currentHorizontal.toFixed(3));n.currentBlue+=.002;n.currentGreen+=.005;n.currentRead+=.008;if(n.currentBlue>.9){n.currentBlue=1}if(n.currentGreen>.9){n.currentGreen=1}if(n.currentRed>.9){n.currentRed=1}if(n.currentHorizontal>.999){n.currentHorizontal=1}c({gain:.02,osc1:["triangle",200,410],osc2:["sine",430,400],osc3:["triangle",420,400],timeout:2200})}function s(){n.currentHorizontal-=.001;n.currentHorizontal=parseFloat(n.currentHorizontal.toFixed(3));n.currentBlue-=.005;n.currentGreen-=.002;n.currentRed-=.008;if(n.currentBlue<0){n.currentBlue=0}if(n.currentGreen<0){n.currentGreen=0}if(n.currentRed<0){n.currentRed=0}if(n.currentHorizontal<0){n.currentHorizontal=0}c({gain:.02,osc1:["triangle",200,370],osc2:["sine",430,400],osc3:["triangle",420,360],timeout:2200})}function f(){var e=a.createOscillator();var t=a.createGain();t.connect(a.destination);t.gain.value=.3;e.type="sine";e.frequency.value=60;e.connect(t);e.start();var r=a.createOscillator();r.type="triangle";r.frequency.value=80;r.connect(t);r.start();var n=a.createOscillator();n.type="sine";n.frequency.value=80;n.connect(t);n.start();t.gain.exponentialRampToValueAtTime(.001,a.currentTime+.8);setTimeout(function(){e.stop();r.stop();n.stop();t.disconnect(a.destination);t=null},850)}function d(){var e=o.createOscillator();var t=o.createGain();t.connect(o.destination);t.gain.value=.2;e.type="sine";e.frequency.value=180;e.connect(t);e.start();var r=o.createOscillator();r.type="triangle";r.frequency.value=180;r.connect(t);r.start();t.gain.exponentialRampToValueAtTime(.01,o.currentTime+1);setTimeout(function(){e.stop();r.stop();t.disconnect(o.destination);t=null},1e3)}function v(){var e=o.createOscillator();var t=o.createGain();t.connect(o.destination);t.gain.value=.2;e.type="sawtooth";e.frequency.value=100;e.connect(t);e.start();var r=o.createOscillator();r.type="triangle";r.frequency.value=120;r.connect(t);r.start();setTimeout(function(){e.stop();r.stop();t.disconnect(o.destination);t=null},300)}function p(){var e=o.createOscillator();var t=o.createGain();t.connect(o.destination);t.gain.value=.4;e.type="sine";e.frequency.value=195;e.connect(t);e.start();var r=o.createOscillator();r.type="triangle";r.frequency.value=110;r.connect(t);r.start();var n=o.createOscillator();n.type="triangle";n.frequency.value=80;n.connect(t);n.start();t.gain.exponentialRampToValueAtTime(.01,o.currentTime+2);setTimeout(function(){e.stop();r.stop();n.stop();t.disconnect(o.destination);t=null},2500)}function m(){var e=o.createOscillator();var t=o.createGain();t.connect(o.destination);t.gain.value=.3;e.type="sine";e.frequency.value=215;e.connect(t);e.start();var r=o.createOscillator();r.type="triangle";r.frequency.value=120;r.connect(t);r.start();var n=o.createOscillator();n.type="sawtooth";n.frequency.value=20;n.connect(t);n.start();t.gain.exponentialRampToValueAtTime(.01,o.currentTime+2);setTimeout(function(){e.stop();r.stop();n.stop();t.disconnect(o.destination);t=null},2500)}t.exports={up:i,down:l,left:u,right:s,play:f,switchBlock:d,solveError:v,solveCorrect:p,startGame:m}},{"./utils":4}],3:[function(e,t,r){"use strict";var n=e("./utils");function o(){var e={all:["⦿","⊞","⋓","⋒","⌽","△","○","⊔","⊿","⋊","⋈","⋉","☆"]};var t=n.currentLevel;function r(){var t=Math.floor(Math.random()*(e.all.length-1+1))+1;return e.all[t-1]}function o(){var e=Math.floor(Math.random()*(n.HIGHEST_FREQ_HZ-n.LOWEST_FREQ_HZ+1))+n.LOWEST_FREQ_HZ;e=Math.trunc(e/Math.pow(10,11))*Math.pow(10,11);return{freq:e,horiz:parseFloat(Math.random()).toFixed(3)}}switch(t){case 2:e.first=[[r(),r()]];e.second=[[r(),r()],[r(),r()]];e.coord=o();break;case 3:e.first=[[r(),r(),r()],[r(),r(),r()]];e.second=[[r(),r(),r()],[r(),r(),r()]];e.coord=o();break;case 4:e.first=[[r(),r(),r()],[r(),r(),r()],[r(),r(),r()]];e.second=[[r(),r(),r()],[r(),r(),r()],[r(),r(),r()],[r(),r(),r()]];e.coord=o();break;case 5:e.first=[[r(),r(),r(),r()],[r(),r(),r(),r()],[r(),r(),r(),r()],[r(),r(),r(),r()]];e.second=[[r(),r(),r(),r()],[r(),r(),r(),r()],[r(),r(),r(),r()],[r(),r(),r(),r()],[r(),r(),r(),r()]];e.coord=o();break;case 1:default:e.first=[[r(),r()]];e.second=[[r(),r()]];e.coord=o()}return e}function a(e,t){if(!e||!e.length||(!t||!t.length)){console.error("Missing matrices.");return}if(e[0].length!==t[0].length){console.error("First matrix length does not match second matrix column length");return}var r=[];var n=[];e.map(function(e){t.map(function(t){for(var o=0;o<t.length;o++){n.push(e[o]+t[o])}r.push(n.join(""));n=[]})});return r.join("")}t.exports={generatePuzzle:o,multiply:a}},{"./utils":4}],4:[function(e,t,r){"use strict";var n=3e8;var o=1e9;var a=38e13;var c=799e12;var i=(c+a)/2;var l=window.localStorage;var u={SPEED_OF_LIGHT:n,NM_IN_METER:o,LOWEST_FREQ_HZ:a,HIGHEST_FREQ_HZ:c,MID_FREQ_HZ:i,currentFreq:f("currentFreq",i),currentRed:f("currentRed",1),currentBlue:f("currentBlue",0),currentGreen:f("currentGreen",0),currentHorizontal:f("currentHorizontal",.5),colorNM:f("colorNM",789),currentLevel:f("currentLevel",1),currentIteration:f("currentIteration",0),triangles:f("triangles",0),saveInfo:s,getInfo:f};function s(){l.setItem("currentFreq",u.currentFreq);l.setItem("currentRed",u.currentRed);l.setItem("currentBlue",u.currentBlue);l.setItem("currentGreen",u.currentGreen);l.setItem("currentHorizontal",u.currentHorizontal);l.setItem("currentIteration",u.currentIteration);l.setItem("triangles",u.triangles);l.setItem("currentLevel",u.currentLevel)}function f(e,t){var r=l.getItem(e);if(r){return parseFloat(r)}return t}t.exports=u},{}],5:[function(e,t,r){"use strict";var n=e("./utils");var o=e("./matrices");var a=e("./audio");var c=false;var i=document.querySelector("canvas");var l=i.getContext("2d");var u,s,f;var d;var v=0;var p=0;var m=false;var h=false;var g=document.querySelector("#info");var y=document.querySelector("#face2");var q=document.querySelector("#wrapper");var w=document.querySelector("#level");var T=document.querySelector("#stats h3 span");var z=[];var M={};w.querySelector("span").textContent=n.getInfo("currentLevel",1);function H(){var e=n.currentFreq;var t=document.querySelectorAll(".face");for(var r=0;r<t.length;r++){t[r].classList.add("off");q.classList.remove("face"+(r+1))}if(n.currentHorizontal>=.75){y=document.querySelector("#face4");y.classList.remove("off");q.classList.add("face4")}else if(n.currentHorizontal>=.5&&n.currentHorizontal<.75){y=document.querySelector("#face3");q.classList.add("face3");y.classList.remove("off")}else if(n.currentHorizontal>=.25&&n.currentHorizontal<.5){y=document.querySelector("#face2");y.classList.remove("off");q.classList.add("face2")}else{y=document.querySelector("#face1");y.classList.remove("off");q.className=""}n.colorNM=Math.floor(n.SPEED_OF_LIGHT/e*n.NM_IN_METER);if(n.colorNM>=380&&n.colorNM<440){u=-(n.colorNM-440)/(440-380);s=0;f=n.currentBlue}else if(n.colorNM>=440&&n.colorNM<490){u=0;s=(n.colorNM-440)/(490-440);f=n.currentBlue}else if(n.colorNM>=490&&n.colorNM<510){u=0;s=n.currentGreen;f=-(n.colorNM-510)/(510-490)}else if(n.colorNM>=510&&n.colorNM<580){u=(n.colorNM-510)/(580-510);s=1;f=n.currentBlue}else if(n.colorNM>=580&&n.colorNM<645){u=1;s=-(n.colorNM-645)/(645-580);f=n.currentBlue}else if(n.colorNM>=645&&n.colorNM<771){u=1;s=0;f=0}else{u=0;f=0;s=0}u=Math.round(u*100);s=Math.round(s*100);f=Math.round(f*100);c=!c;if(c){d="rgba("+u+","+s+","+f+", 0.8)"}g.querySelector("#freq").textContent=n.currentFreq;g.querySelector("#mid").textContent=n.currentHorizontal}function C(){v+=9e-4;p+=.015;if(v>.5){v=0;H()}if(p>.8){p=0;H()}if(!d){d="rgba(1, 1, 1, 0.9)"}if(!u&&!s&&!f){u=0;s=0;f=0}function e(e,t){return Math.floor(Math.random()*(e-t+1))+t}var t=l.createLinearGradient(0,0,i.width,i.height);t.addColorStop(v,d);t.addColorStop(p,"rgba("+u+","+s+","+f+", "+v+")");l.globalAlpha=v;l.fillStyle=t;l.fillRect(0,0,i.width,i.height);l.beginPath();l.moveTo(e(10,570),e(20,280));l.bezierCurveTo(e(20,130),e(10,200),e(10,130),e(0,150),230,150);l.bezierCurveTo(250,e(10,180),e(10,320),180,e(300,540),e(0,150));l.bezierCurveTo(e(10,420),150,e(10,420),120,e(10,420),100);l.bezierCurveTo(e(0,430),40,e(10,370),30,e(50,340),e(50,400));l.bezierCurveTo(e(10,320),e(0,300),250,20,250,50);l.bezierCurveTo(e(10,200),5,e(0,150),20,170,80);l.closePath();l.lineWidth=5;if(n.currentLevel==1){l.fillStyle="rgba(5, "+e(0,200)+", "+e(150,240)+", 0.2)"}else if(n.currentLevel==2){l.fillStyle="rgba("+e(150,240)+", "+e(0,200)+", 5, 0.2)"}else if(n.currentLevel==3){l.fillStyle="rgba("+e(150,240)+", 5, "+e(150,240)+", 0.2)"}l.fill();window.requestAnimationFrame(C)}function E(){m=!m;if(m){y.classList.add("on")}else{y.classList.remove("on")}}function x(){i.width=window.innerWidth;i.height=window.innerHeight;l.clearRect(0,0,i.width,i.height)}function S(e){if(h){return}var t=e.first;var r=e.second;var c=e.coord;var i=0;var l=document.createElement("div");l.id="puzzle";r.map(function(e){i+=e.length});z=[];e.all.map(function(e){z.push(e)});var u=document.createElement("div");u.id="solution";var s=i*t.length*2;for(var f=0;f<s;f++){M["ans"+f]=0;var d=document.createElement("div");d.className="ansvalue";d.id="ans-"+f;d.onclick=function(e){var t=e.target;var r=t.id.split("-")[1];t.textContent=z[M["ans"+r]];M["ans"+r]+=1;if(M["ans"+r]>Object.keys(z).length){M["ans"+r]=0}n.saveInfo();a.switchBlock()};u.appendChild(d);if((f+1)%t[0].length===0&&f<s-1){var v=document.createElement("div");if((f+1)%t.length===0){v.className="plus";v.textContent=","}else{v.className="plus";v.textContent="+"}u.appendChild(v)}}var p=document.createElement("button");p.type="button";p.textContent="✓";p.onclick=function(e){e.preventDefault();var i=document.querySelectorAll(".ansvalue");var l="";for(var s=0;s<i.length;s++){l+=i[s].innerText}var f=o.multiply(t,r);var d=f===l;var v=n.currentHorizontal==c.horiz&&n.currentFreq==c.freq;if(!d||!v){u.classList.add("error");a.solveError()}else{u.classList.remove("error");a.solveCorrect();document.body.removeChild(document.querySelector("#solution"));document.body.removeChild(document.querySelector("#puzzle"));n.currentIteration+=1;if(n.currentIteration%3===0){n.currentLevel+=1;n.currentIteration=0;w.querySelector("span").textContent=n.currentLevel}if(n.currentLevel>5){n.currentLevel=5}n.triangles+=n.currentLevel*10;if(n.triangles>=999999){n.triangles=999999}h=false;T.textContent=n.triangles;n.saveInfo()}};u.appendChild(p);var m=document.createElement("h2");var g=document.createElement("p");var y=document.createElement("p");m.textContent="freq: "+c.freq+" / horiz: "+c.horiz;t.map(function(e){var t=document.createElement("div");t.className="row";t.textContent=e.join("   ");g.appendChild(t)});r.map(function(e){var t=document.createElement("div");t.className="row";t.textContent=e.join("   ");y.appendChild(t)});g.style.width=50*t.length+"px";y.style.width=50*r.length+"px";l.appendChild(m);l.appendChild(g);l.appendChild(y);document.body.appendChild(l);document.body.appendChild(u);h=true}t.exports={add:S,calculate:H,resize:x,generateGradient:C,switchBackground:E}},{"./audio":2,"./matrices":3,"./utils":4}]},{},[1]);